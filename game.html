<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Memory Game</title>
    <style>
        /* General Reset */
        * {
            box-sizing: border-box;
        }

        body {
            margin: 0;
            font-family: Arial, sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            position: relative;
            flex-direction: column;
            /* Stack elements vertically */
            overflow: hidden;
            /* Prevent scrolling */
        }

        /* Background video */
        #backgroundVideo {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
            /* Cover the entire screen */
            z-index: -1;
            /* Place behind other elements */
        }

        /* Game Container */
        #game {
            position: relative;
            z-index: 1;
            /* Place on top of the video */
        }

        /* Game Grid */
        .grid {
            max-width: 960px;
            margin: 0 auto;
            display: flex;
            flex-wrap: wrap;
            justify-content: space-evenly;
        }

        /* Cards */
        .card {
            position: relative;
            transition: all .4s linear;
            transform-style: preserve-3d;
            margin: 5px;
            width: 150px;
            height: 150px;
            perspective: 1000px;
            cursor: pointer;
        }

        .card .front,
        .card .back {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
        }

        .card .front {
            background: url('https://media.istockphoto.com/id/1488184544/photo/neon-purple-brick-wall-texture-for-pattern-background-abstract-architectural-wide-panorama.jpg?s=612x612&w=0&k=20&c=uJ4tx6H0GiTZGJqg-gwd-f-xdr9zXdKYErm6Uklgnbs=') no-repeat center center / cover;
            border-radius: 20px;
        }

        .card .back {
            transform: rotateY(180deg);
            background-size: contain;
            background-repeat: no-repeat;
            background-position: center center;
        }

        .selected {
            transform: rotateY(180deg);
        }

        /* Buttons */
        .button {
            padding: 10px 20px;
            font-size: 1rem;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            margin: 10px;
            color: white;
            text-align: center;
            text-decoration: none;
            /* Remove underline from links */
        }

        .BTN {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .menu-button {
            background: linear-gradient(135deg, #2f46c5, #02142e);
        }

        /* Timer button styling */
        .timer-button {
            padding: 10px 20px;
            font-size: 1rem;
            background: linear-gradient(135deg, #2f46c5, #02142e);
            color: white;
            border-radius: 5px;
            text-align: center;
            cursor: pointer;
            margin: 10px;
            border: none;
        }

        .sound-button {
            background: linear-gradient(135deg, #02142e, #2f46c5);
            color: white;
            padding: 10px 20px;
            font-size: 1rem;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            margin: 10px;
            color: white;
            text-align: center;
            text-decoration: none;
        }
       
        #resetButton{
                background: linear-gradient(135deg, #02142e, #2f46c5);
            color: white;
            padding: 10px 20px;
            font-size: 1rem;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            margin: 10px;
            color: white;
            text-align: center;
            text-decoration: none;
        }
     
    </style>
</head>

<body>

    <video id="backgroundVideo" autoplay loop muted>
        <source src="IMAGES/bf03357633894926afd3dc6d00182260_preview.mp4" type="video/mp4">
        
    </video>

    <div id="game">
        <div class="BTN">
            <div class="buttons">
                <a href="index.html"><button class="button menu-button">Menu</button></a>
            </div>
            <!-- Reset Button -->
            <button class="reset-button" id="resetButton">Reset</button>
            <div class="button-container">
                <button onclick="toggleSound()" class="sound-button" id="soundButton" aria-label="Toggle sound">Sound: Off</button>
            </div>
            <audio id="buttonSound" src="virtual-memory-uplifting-gaming-synthwave-199942.mp3" loop></audio>
            <!-- Timer Button -->
            <div id="timerButton" class="timer-button">Timer: 20</div>
        </div>
    </div>

    <section class="grid"></section>

    <script>
        'use strict';

        // Array of card objects
        const cardsArray = [
            { 'name': 'FACEBOOK', 'img': 'IMAGES/facebook.svg' },
            { 'name': 'LINKEDIN', 'img': 'IMAGES/linkedin.svg' },
            { 'name': 'PINTEREST', 'img': 'IMAGES/pinterest.svg' },
            { 'name': 'SKYPE', 'img': 'IMAGES/skype.svg' },
            { 'name': 'SNAPCHAT', 'img': 'IMAGES/snapchat.svg' },
            { 'name': 'TWITTER', 'img': 'IMAGES/twitter.svg' },
            { 'name': 'WHATSAPP', 'img': 'IMAGES/whatsapp.svg' },
            { 'name': 'YOUTUBE', 'img': 'IMAGES/youtube.svg' },
            { 'name': 'YAHOO', 'img': 'IMAGES/yahoo.svg' }
        ];

        //  duplicating and shuffling the cards
        let gameGrid = [];
        let firstGuess = '';
        let secondGuess = '';
        let count = 0;
        let previousTarget = null;
        let moveCount = 0;
        let timeRemaining = 20;
        let timerInterval;
        const delay = 1200;

        const grid = document.querySelector('.grid');
        const resetButton = document.getElementById('resetButton');
        const timerButton = document.getElementById('timerButton');

        const initializeGame = () => {
            grid.innerHTML = ''; 
            gameGrid = cardsArray.concat(cardsArray).sort(() => 0.5 - Math.random());
            firstGuess = '';
            secondGuess = '';
            count = 0;
            previousTarget = null;

            // Creating  card  to the  grid
            gameGrid.forEach(item => {
                const card = document.createElement('div');
                card.classList.add('card');
                card.dataset.name = item.name;

                const front = document.createElement('div');
                front.classList.add('front');

                const back = document.createElement('div');
                back.classList.add('back');
                back.style.backgroundImage = `url(${item.img})`;

                grid.appendChild(card);
                card.appendChild(front);
                card.appendChild(back);
            });

            startTimer();
        };

        // Timer function
        const startTimer = () => {
            timeRemaining = 60; // Reset to 20 seconds
            timerButton.textContent = `Timer: ${timeRemaining}`;

            if (timerInterval) {
                clearInterval(timerInterval); // Clear any existing interval
            }

            timerInterval = setInterval(() => {
                timeRemaining--;
                timerButton.textContent = `Timer: ${timeRemaining}`;

                if (timeRemaining <= 0) {
                    clearInterval(timerInterval);
                    alert('Time\'s up! Game Over.');
                    initializeGame(); // Reset the game when time's up
                }
            }, 1000);
        };

        // Function to handle matched cards
        const match = () => {
            const selectedCards = document.querySelectorAll('.selected');
            selectedCards.forEach(card => {
                card.classList.add('match');
                card.classList.remove('selected');
            });
        };

        // Reset the game
        resetButton.addEventListener('click', initializeGame);

        // Main game logic
        grid.addEventListener('click', event => {
            const clicked = event.target;
            if (clicked.nodeName === 'SECTION' || clicked === previousTarget || clicked.parentNode.classList.contains('match') || clicked.parentNode.classList.contains('selected')) {
                return;
            }

            if (count < 2) {
                count++;
                if (count === 1) {
                    firstGuess = clicked.parentNode.dataset.name;
                    clicked.parentNode.classList.add('selected');
                } else {
                    secondGuess = clicked.parentNode.dataset.name;
                    clicked.parentNode.classList.add('selected');
                }

                if (firstGuess && secondGuess) {
                    if (firstGuess === secondGuess) {
                        setTimeout(match, delay);
                    }
                    setTimeout(resetGuesses, delay);
                }
                previousTarget = clicked;
            }
        });

        // Reset guesses after each turn
        const resetGuesses = () => {
            firstGuess = '';
            secondGuess = '';
            count = 0;

            const selectedCards = document.querySelectorAll('.selected');
            selectedCards.forEach(card => {
                card.classList.remove('selected');
            });
        };

        // Initialize the game on page load
        window.addEventListener('load', initializeGame);
    </script>

</body>

</html>
