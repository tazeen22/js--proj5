<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Memory Game</title>
    <style>
        /* General Reset */
        * {
            box-sizing: border-box;
        }

        body {
            margin: 0;
            font-family: Arial, sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            position: relative;
            flex-direction: column;
            overflow: hidden;
        }

        /* Background video */
        #backgroundVideo {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
            z-index: -1;
        }

        /* Game Container */
        #game {
            position: relative;
            z-index: 1;
        }

        /* Game Grid */
        .grid {
            max-width: 960px;
            margin: 0 auto;
            display: flex;
            flex-wrap: wrap;
            justify-content: space-evenly;
        }

        /* Cards */
        .card {
            position: relative;
            transition: all .4s linear;
            transform-style: preserve-3d;
            margin: 5px;
            width: 150px;
            height: 150px;
            perspective: 1000px;
            cursor: pointer;
        }

        .card .front,
        .card .back {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
        }

        .card .front {
            background: url('https://media.istockphoto.com/id/1488184544/photo/neon-purple-brick-wall-texture-for-pattern-background-abstract-architectural-wide-panorama.jpg?s=612x612&w=0&k=20&c=uJ4tx6H0GiTZGJqg-gwd-f-xdr9zXdKYErm6Uklgnbs=') no-repeat center center / cover;
            border-radius: 20px;
        }

        .card .back {
            transform: rotateY(180deg);
            background-size: contain;
            background-repeat: no-repeat;
            background-position: center center;
        }

        .selected {
            transform: rotateY(180deg);
        }

        /* Hide matched cards */
        .match {
            visibility: hidden;
        }

        /* Buttons */
        .button {
            padding: 10px 20px;
            font-size: 1rem;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            margin: 10px;
            color: white;
            text-align: center;
            text-decoration: none;
        }

        .BTN {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .menu-button {
            background: linear-gradient(135deg, #2f46c5, #02142e);
        }

        .timer-button {
            padding: 10px 20px;
            font-size: 1rem;
            background: linear-gradient(135deg, #2f46c5, #02142e);
            color: white;
            border-radius: 5px;
            text-align: center;
            cursor: pointer;
            margin: 10px;
            border: none;
        }

        .sound-button {
            background: linear-gradient(135deg, #02142e, #2f46c5);
            color: white;
            padding: 10px 20px;
            font-size: 1rem;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            margin: 10px;
            text-align: center;
            text-decoration: none;
        }

        #resetButton {
            background: linear-gradient(135deg, #02142e, #2f46c5);
            color: white;
            padding: 10px 20px;
            font-size: 1rem;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            margin: 10px;
            text-align: center;
            text-decoration: none;
        }

        #levels {
            background: linear-gradient(135deg, #02142e, #2f46c5);
            color: white;
            padding: 10px 20px;
            font-size: 1rem;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            margin: 10px;
            text-align: center;
            text-decoration: none;
        }

        option {
            background-color: #02142e;
            border: none;
        }
    </style>
</head>

<body>

    <video id="backgroundVideo" autoplay loop muted>
        <source src="IMAGES/bf03357633894926afd3dc6d00182260_preview.mp4" type="video/mp4">
        Your browser does not support the video tag.
    </video>

    <div id="game">
        <div class="BTN">
            <div class="buttons">
                <a href="index.html"><button class="button menu-button">Menu</button></a>
            </div>
            <button class="button" id="resetButton">Reset</button>
            <div class="button-container">
                <button onclick="toggleSound()" class="sound-button" id="soundButton" aria-label="Toggle sound">Sound: Off</button>
            </div>
            <div id="movesButton" class="timer-button">Moves: 30</div>
            <select id="levels">
                <option value="easy">Easy</option>
                <option value="medium">Medium</option>
                <option value="hard">Hard</option>
            </select>
        </div>
    </div>

    <section class="grid"></section>

    <!-- Audio Element -->
    <audio id="buttonSound" src="virtual-memory-uplifting-gaming-synthwave-199942.mp3"></audio>

    <script>
'use strict';

const cardsArray = [
    { 'name': 'FACEBOOK', 'img': 'IMAGES/facebook.svg' },
    { 'name': 'LINKEDIN', 'img': 'IMAGES/linkedin.svg' },
    { 'name': 'PINTEREST', 'img': 'IMAGES/pinterest.svg' },
    { 'name': 'SKYPE', 'img': 'IMAGES/skype.svg' },
    { 'name': 'SNAPCHAT', 'img': 'IMAGES/snapchat.svg' },
    { 'name': 'TWITTER', 'img': 'IMAGES/twitter.svg' },
    { 'name': 'WHATSAPP', 'img': 'IMAGES/whatsapp.svg' },
    { 'name': 'YOUTUBE', 'img': 'IMAGES/youtube.svg' },
    { 'name': 'YAHOO', 'img': 'IMAGES/yahoo.svg' }
];

const DIFFICULTY_SETTINGS = {
    easy: { pairs: 4, moves: 30 },
    medium: { pairs: 8, moves: 40 },
    hard: { pairs: 10, moves: 50 }
};

let gameGrid = [];
let firstGuess = '';
let secondGuess = '';
let count = 0;
let previousTarget = null;
let movesRemaining = 0;
const delay = 1200;

const grid = document.querySelector('.grid');
const resetButton = document.getElementById('resetButton');
const movesButton = document.getElementById('movesButton');
const levelsDropdown = document.getElementById('levels');
const buttonSound = document.getElementById("buttonSound");
const soundButton = document.getElementById("soundButton");

const initializeGame = () => {
    grid.innerHTML = '';
    count = 0;
    previousTarget = null;

    const selectedLevel = levelsDropdown.value;
    const { pairs, moves } = DIFFICULTY_SETTINGS[selectedLevel];

    movesRemaining = moves;
    gameGrid = cardsArray.slice(0, pairs).concat(cardsArray.slice(0, pairs)).sort(() => 0.5 - Math.random());

    updateMovesDisplay();

    gameGrid.forEach(item => {
        const card = document.createElement('div');
        card.classList.add('card');
        card.dataset.name = item.name;

        const front = document.createElement('div');
        front.classList.add('front');

        const back = document.createElement('div');
        back.classList.add('back');
        back.style.backgroundImage = `url(${item.img})`;

        grid.appendChild(card);
        card.appendChild(front);
        card.appendChild(back);
    });
};

const updateMovesDisplay = () => {
    movesButton.textContent = `Moves: ${movesRemaining}`;
};

const matchCards = () => {
    const selected = document.querySelectorAll('.selected');
    selected.forEach(card => {
        card.classList.add('match');
    });
};

const resetGuesses = () => {
    firstGuess = '';
    secondGuess = '';
    count = 0;
    previousTarget = null;

    const selected = document.querySelectorAll('.selected');
    selected.forEach(card => {
        card.classList.remove('selected');
    });
};

const handleCardClick = (clicked) => {
    if (clicked.nodeName === 'SECTION' || clicked === previousTarget || clicked.parentNode.classList.contains('selected') || clicked.parentNode.classList.contains('match')) {
        return;
    }

    count++;
    if (count === 1) {
        firstGuess = clicked.parentNode.dataset.name;
        clicked.parentNode.classList.add('selected');
    } else {
        secondGuess = clicked.parentNode.dataset.name;
        clicked.parentNode.classList.add('selected');
        if (firstGuess === secondGuess) {
            setTimeout(matchCards, delay);
        }
        setTimeout(resetGuesses, delay);
    }

    previousTarget = clicked;
    movesRemaining--;
    updateMovesDisplay();

    if (movesRemaining === 0) {
        alert('Game over! Resetting the game.');
        initializeGame();
    }
};

grid.addEventListener('click', event => handleCardClick(event.target));

resetButton.addEventListener('click', initializeGame);

levelsDropdown.addEventListener('change', initializeGame);

soundButton.addEventListener('click', () => {
    if (buttonSound.paused) {
        buttonSound.play();
        soundButton.textContent = 'Sound: On';
    } else {
        buttonSound.pause();
        soundButton.textContent = 'Sound: Off';
    }
});

initializeGame();

    </script>
</body>

</html>
